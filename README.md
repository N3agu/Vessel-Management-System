<div align=center>
  <h1>Vessel Management System</h1>
<br/><img src="https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/VesselManagementClient/Assets/256x256.png" width="256">
</div>

## Summary
A RESTful Vessel Management System built with C#, ASP.NET Core, Entity Framework, and SQL Server, featuring CRUD operations, a many-to-many relationship between ship owners and vessels, unit tests using xUnit, and a C# MVVM client application to consume the API.

## Project Overview
This project consists of two main parts:
1.  **`VesselManagementApi`**: A backend RESTful API built with ASP.NET Core to manage ship and owner data stored in a SQL Server database.
2.  **`VesselManagementClient`**: A desktop client application built with WPF and the MVVM pattern, using ModernWpfUI for styling, which consumes the backend API.

## Features
* **Backend API (`VesselManagementApi`)**:
    * Built with .NET 8 and ASP.NET Core Web API.
    * Uses Entity Framework Core for data access.
    * Targets SQL Server.
    * Implements a **many-to-many relationship** between Owners and Ships using a junction table (`ShipOwners`).
        * One owner can own multiple ships.
        * One ship can be owned by multiple owners.
    * Provides RESTful CRUD (Create, Read, Update, Delete) endpoints for managing ships and owners.
    * Includes API documentation via Swagger.
    * Uses Repository and Service patterns for separation of concerns.
    * Includes xUnit unit tests to verify API functionality.
* **Frontend Client (`VesselManagementClient`)**:
    * Built with WPF and .NET 8.
    * Follows the Model-View-ViewModel (MVVM) pattern.
    * Uses the `ModernWpfUI` library for a modern look.
    * Consumes the `VesselManagementApi` to display and manage data.
    * Allows viewing, adding, editing (ships only), and deleting ships and owners.
    * Provides context menus for common actions (copy, delete, edit).

## API Endpoints (`VesselManagementApi`)

The API provides the following endpoints:

### Owners

* **`GET /api/owners`**
    * Description: Retrieves a list of all owners.
    * Response: `200 OK` with `IEnumerable<OwnerDto>`
* **`GET /api/owners/{id}`**
    * Description: Retrieves a specific owner by ID.
    * Response: `200 OK` with `OwnerDto`, `404 Not Found`
* **`POST /api/owners`**
    * Description: Creates a new owner.
    * Request Body: `CreateOwnerDto`
    * Response: `201 Created` with `OwnerDto` and Location header, `400 Bad Request`
* **`DELETE /api/owners/{id}`**
    * Description: Deletes an owner and their ship ownership links.
    * Response: `204 No Content`, `404 Not Found`

### Ships

* **`GET /api/ships`**
    * Description: Retrieves a list of all ships (basic details).
    * Response: `200 OK` with `IEnumerable<ShipDto>`
* **`GET /api/ships/{id}`**
    * Description: Retrieves detailed information for a specific ship, including its owners.
    * Response: `200 OK` with `ShipDetailsDto`, `404 Not Found`
* **`POST /api/ships`**
    * Description: Creates a new ship and links it to specified owners.
    * Request Body: `CreateShipDto`
    * Response: `201 Created` with `ShipDetailsDto` and Location header, `400 Bad Request`
* **`PUT /api/ships/{id}`**
    * Description: Updates the properties (Name, IMO, Type, Tonnage) of an existing ship.
    * Request Body: `UpdateShipDto`
    * Response: `204 No Content`, `400 Bad Request`, `404 Not Found`
* **`DELETE /api/ships/{id}`**
    * Description: Deletes a ship and its ownership links.
    * Response: `204 No Content`, `404 Not Found`

## Screenshots

<details open>
  <summary><strong>Screenshot of Client (Ships)</strong></summary>
  
  ![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/ClientShips.png)
</details>

<details>
  <summary><strong>Screenshot of Client (Owners)</strong></summary>
  
  ![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/ClientOwners.png)
</details>

<details>
  <summary><strong>Screenshot of Client (Create Ship)</strong></summary>
  
  ![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/AddShipClient.png)
</details>

<details>
  <summary><strong>Screenshot of Client (Create Owner)</strong></summary>
  
  ![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/AddOwnerClient.png)
</details>

## API Documentation (Swagger)
The API includes Swagger documentation generated by Swashbuckle.

* **Accessing Swagger UI:** Once the `VesselManagementApi` project is running, navigate to `/swagger` in your browser (`https://localhost:7042/swagger`).
* **Features:** The Swagger UI provides:
    * A list of all available endpoints.
    * Details about request parameters, request bodies (with schemas based on DTOs), and response types.
    * Descriptions for endpoints and DTO properties (pulled from XML comments in the code).
    * An interface to execute API requests directly from the browser for testing.

![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/Swagger.png)

## Setup and Running

### Prerequisites
* .NET 8 SDK
* Visual Studio 2022 (with ASP.NET and Desktop workloads) or VS Code with C# Dev Kit
* SQL Server Instance (I used the Full version)
* SQL Server Management Studio (optional)
* Git

### Steps

1.  **Clone the Repository:**
    ```bash
    git clone https://github.com/N3agu/Vessel-Management-System.git
    cd Vessel-Management-System
    ```
2.  **Configure Connection String:**
    * Open `VesselManagementApi/appsettings.json`.
    * Modify the `DefaultConnection` string under `ConnectionStrings` to point to your SQL Server instance. Ensure the user has permissions to create/modify the database.
    * **Example (SQL Express):** `"Server=.\\SQLEXPRESS;Database=VesselManagementDB;Trusted_Connection=True;TrustServerCertificate=True;"`
    * **Example (LocalDB):** `"Server=(localdb)\\mssqllocaldb;Database=VesselManagementDB;Trusted_Connection=True;MultipleActiveResultSets=true"`
3.  **Build the Solution:**
    * Open the solution file (`.sln`) in Visual Studio and build (Build > Build Solution).
    * Or, run `dotnet build` in the root directory via the command line.
4.  **Apply Database Migrations (API):**
    * **Using Package Manager Console (in Visual Studio):**
        * Select `VesselManagementApi` as the Default project.
        * Run: `Update-Database`
    * **Using .NET CLI:**
        * Navigate to the `VesselManagementApi` project folder: `cd VesselManagementApi`
        * Run: `dotnet ef database update`
5.  **Run the API:**
    * Set `VesselManagementApi` as the startup project in Visual Studio and press F5 or Ctrl+F5.
    * Or, run `dotnet run --project VesselManagementApi` from the solution directory.
    * Note the HTTPS URL the API is listening on (`https://localhost:7042`).
6.  **Configure API URL in Client:**
    * Open `VesselManagementClient/Services/ApiService.cs`.
    * Update the `_baseApiUrl` variable to match the URL where your API is running (from step 5).
7.  **Run the Client:**
    * Set `VesselManagementClient` as the startup project in Visual Studio and press F5 or Ctrl+F5.
    * Or, run `dotnet run --project VesselManagementClient` from the solution directory.

## Testing
* **Unit Tests:** The `VesselManagementApi.Tests` project contains unit tests built using xUnit and `Microsoft.AspNetCore.Mvc.Testing`. These tests verify the API endpoints by sending HTTP requests to an in-memory test server (or configured test database) and asserting the responses.
* **Running Tests:**
    * Use the Test Explorer in Visual Studio.
    * Run `dotnet test` from the command line in the solution directory or the test project directory.

![](https://raw.githubusercontent.com/N3agu/Vessel-Management-System/refs/heads/main/Images/UnitTests.png)
